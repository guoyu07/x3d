<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<TITLE>Extensible 3D (X3D), ISO/IEC 19775-2:201x, 6 Services reference</TITLE>
<link rel="stylesheet" href="X3D.css" type="text/css">

</head>
<body>

<div class="CenterDiv">
<img class="x3dlogo" SRC="../Images/x3d.png" ALT="X3D logo" style="width: 176px; height: 88px">
</div>

<div class="CenterDiv">
<p class="HeadingPart">
    Extensible 3D (X3D)<br>
    Part 2: Scene access interface (SAI)</p>

<p class="HeadingClause">6 Services reference</p>
</div>

<img class="x3dbar" SRC="../Images/x3dbar.png" ALT="--- X3D separator bar ---" width="430" height="23">

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="IntroAndContents"></a>
6.1 Introduction and topics</h1>

<h2><a name="Introduction"></a>
6.1.1 Introduction</h2>

<p>This clause provides a detailed definition of the semantics of the services
that a browser shall provide to external applications as defined in this
part of ISO/IEC 19775.</p>

<h2><a name="Topics"></a>6.1.2 Topics</h2>

<p>
<a href="#t-Topics">Table 6.1</a> specifies the 
topics for this clause.</p>

<div class="CenterDiv">

<p class="TableCaption">
<a name="t-Topics"></a>Table 6.1 &mdash; Topics</p>

<table class="topics">
<tbody>
<tr>
<td>
<ul>
  <li><a href="#IntroAndContents">6.1 Introduction and topics</a>
    <ul>
      <li><a href="#Introduction">6.1.1 Introduction</a></li>
      <li><a href="#Topics">6.1.2 Topics</a></li>
      <li><a href="#ConventionsUsed">6.1.3 Conventions used</a></li>
    </ul>
  </li>
  <li><a href="#EstablishingAConnection">6.2 Establishing a connection</a>
    <ul>
      <li><a href="#EstablishConnectionIntro">6.2.1 Introduction</a></li>
      <li><a href="#getBrowser">6.2.2 getBrowser</a></li>
      <li><a href="#createBrowser">6.2.3 createBrowser</a></li>
    </ul>
  </li>
  <li><a href="#BrowserServices">6.3 Browser services</a>
    <ul>
      <li><a href="#BrowserServiceIntroduction">6.3.1 Introduction</a></li>
      <li><a href="#getName">6.3.2 getName</a></li>
      <li><a href="#getVersion">6.3.3 getVersion</a></li>
      <li><a href="#getCurrentSpeed">6.3.4 getCurrentSpeed</a></li>
      <li><a href="#getCurrentFrameRate">6.3.5 getCurrentFrameRate</a></li>
      <li><a href="#getSupportedProfiles">6.3.6 getSupportedProfiles</a></li>
      <li><a href="#getProfile">6.3.7 getProfile</a></li>
      <li><a href="#getSupportedComponents">6.3.8 getSupportedComponents</a></li>
      <li><a href="#getComponent">6.3.9 getComponent</a></li>
      <li><a href="#getExecutionContext">6.3.10 getExecutionContext</a></li>
      <li><a href="#createScene">6.3.11 createScene</a></li>
      <li><a href="#replaceWorld">6.3.12 replaceWorld</a></li>
      <li><a href="#importDocument">6.3.13 importDocument</a></li>
      <li><a href="#loadURL">6.3.14 loadURL</a></li>
      <li><a href="#setDescription">6.3.15 setDescription</a></li>
      <li><a href="#createX3DFromString">6.3.16 createX3DFromString</a></li>
      <li><a href="#createX3DFromStream">6.3.17 createX3DFromStream</a></li>
      <li><a href="#createX3DFromURL">6.3.18 createX3DFromURL</a></li>
      <li><a href="#UpdateControl">6.3.19 updateControl</a></li>
      <li><a href="#RegisterBrowserInterest">6.3.20 registerBrowserInterest</a></li>
      <li><a href="#getRenderingProperties">6.3.21 getRenderingProperties</a></li>
      <li><a href="#getBrowserProperties">6.3.22 getBrowserProperties</a></li>
      <li><a href="#changeViewpoint">6.3.23 changeViewpoint</a></li>
      <li><a href="#Print">6.3.24 print</a></li>
      <li><a href="#BrowserDispose">6.3.25 dispose</a></li>
      <li><a href="#setBrowserOption">6.3.26 setBrowserOption</a></li>
    </ul>
  </li>
  <li><a href="#ExecutionContextServices">6.4 Execution context services</a>
    <ul>
      <li><a href="#getSpecificationVersion">6.4.1 getSpecificationVersion</a>
      <li><a href="#getEncoding">6.4.2 getEncoding</a></li>
      <li><a href="#ECgetProfile">6.4.3 getProfile</a></li>
      <li><a href="#getComponents">6.4.4 getComponents</a></li>
		<li><a href="#getUnits">6.4.5 getUnits</a></li>
      <li><a href="#getWorldURL">6.4.6 getWorldURL</a></li>
      <li><a href="#getNode">6.4.7 getNode</a></li>
      <li><a href="#createNode">6.4.8 createNode</a></li>
      <li><a href="#createProto">6.4.9 createProto</a></li>
      <li><a href="#NamedNodeHandling">6.4.10 namedNodeHandling</a></li>
      <li><a href="#getProtoDeclaration">6.4.11 getProtoDeclaration</a></li>
      <li><a href="#ProtoDeclarationHandling">6.4.12 protoDeclarationHandling</a></li>
      <li><a href="#getExternProtoDeclaration">6.4.13 getExternProtoDeclaration</a></li>
      <li><a href="#ExternProtoDeclarationHandling">6.4.14 externprotoDeclarationHandling</a></li>
      <li><a href="#getRootNodes">6.4.15 getRootNodes</a></li>
      <li><a href="#getRoutes">6.4.16 getRoutes</a></li>
      <li><a href="#DynamicRouteHandling">6.4.17 dynamicRouteHandling</a></li>
      <li><a href="#ExecutionContextDispose">6.4.18 dispose</a></li>
    </ul>
  </li>
  <li><a href="#SceneServices">6.5 Scene services</a>
    <ul>
      <li><a href="#SceneIntroduction">6.5.1 Introduction</a></li>
      <li><a href="#getMetaData">6.5.2 getMetaData</a></li>
      <li><a href="#setMetaData">6.5.3 setMetaData</a></li>
      <li><a href="#SceneNamedNodeHandling">6.5.4 namedNodeHandling</a></li>
      <li><a href="#RootNodeHandling">6.5.5 rootNodeHandling</a></li>
    </ul>
  </li>
  <li><a href="#NodeServices">6.6 Node services</a>
    <ul>
      <li><a href="#NodeServicesIntro">6.6.1 Introduction</a></li>
      <li><a href="#NodeServicesgetTypeName">6.6.2 getTypeName</a></li>
      <li><a href="#getType">6.6.3 getType</a></li>
      <li><a href="#getField">6.6.4 getField</a></li>
      <li><a href="#NodeGetFieldDefinitions">6.6.5 getFieldDefinitions</a></li>
      <li><a href="#NodeDispose">6.6.6 dispose</a></li>
    </ul>
  </li>
  <li><a href="#FieldServices">6.7 Field services</a>
    <ul>
      <li><a href="#FieldServicesIntro">6.7.1 Introduction</a></li>
      <li><a href="#getAccessType">6.7.2 getAccessType</a></li>
      <li><a href="#FieldServicesgetType">6.7.3 getType</a></li>
      <li><a href="#FieldServicesgetName">6.7.4 getName</a></li>
      <li><a href="#getValue">6.7.5 getValue</a></li>
      <li><a href="#setValue">6.7.6 setValue</a></li>
      <li><a href="#RegisterFieldInterest">6.7.7 registerFieldInterest</a></li>
      <li><a href="#FieldDispose">6.7.8 dispose</a></li>
    </ul>
  </li>
  <li><a href="#RouteServices">6.8 Route services</a>
    <ul>
      <li><a href="#getSourceNode">6.8.1 getSourceNode</a></li>
      <li><a href="#getSourceField">6.8.2 getSourceField</a></li>
      <li><a href="#getDestinationNode">6.8.3 getDestinationNode</a></li>
      <li><a href="#getDestinationField">6.8.4 getDestinationField</a></li>
      <li><a href="#RouteDispose">6.8.5 dispose</a></li>
    </ul>
  </li>
  <li><a href="#ConfigurationServices">6.9 Prototype services</a>
    <ul>
      <li><a href="#ConfigurationServicesIntroduction">6.9.1 isExternproto</a></li>
      <li><a href="#getComponentLevel">6.9.2 createInstance</a></li>
      <li><a href="#getProfileName">6.9.3 getFieldDefinitions</a></li>
      <li><a href="#getProfileComponents">6.9.4 checkLoadState</a></li>
      <li><a href="#getProviderName">6.9.5 requestImmediateLoad</a></li>
    </ul>
  </li>
  <li><a href="#ConfigurationServices">6.10 Configuration services</a>
    <ul>
      <li><a href="#ConfigurationServicesIntroduction">6.10.1 Introduction</a></li>
      <li><a href="#getComponentName">6.10.2 getComponentName</a></li>
      <li><a href="#getProfileName">6.10.3 getComponentLevel</a></li>
      <li><a href="#getProfileName">6.10.4 getProfileName</a></li>
      <li><a href="#getProfileComponents">6.10.5 getProfileComponents</a></li>
      <li><a href="#getProviderName">6.10.6 getProviderName</a></li>
		<li><a href="#getUnitCategory">6.10.7 getUnitCategory</a></li>
		<li><a href="#getUnitConversion">6.10.8 getUnitConversion</a></li>
		<li><a href="#getUnitName">6.10.9 getUnitName</a></li>
    </ul>
  </li>
  <li><a href="#ServicesByScriptContent">6.11 Services provided by script content</a>
    <ul>
      <li><a href="#ScriptContentIntroduction">6.11.1 Introduction</a></li>
      <li><a href="#ScriptContentCreation">6.11.2 Creation phase</a></li>
      <li><a href="#ScriptContentSetup">6.11.3 Setup phase</a>
        <ul>
          <li><a href="#setBrowser">6.11.3.1 setBrowser</a></li>
          <li><a href="#setFields">6.11.3.2 setFields</a></li>
          <li><a href="#Initialize">6.11.3.3 initialize</a></li>
        </ul>
      </li>
      <li><a href="#ScriptContentRealised">6.11.4 Realized phase</a>
        <ul>
          <li><a href="#prepareEvents">6.11.4.1 prepareEvents</a></li>
          <li><a href="#eventsProcessed">6.11.4.2 eventsProcessed</a></li>
        </ul>
      </li>
      <li><a href="#ScriptContentDisposed">6.11.5 Disposed phase</a>
        <ul>
          <li><a href="#ScriptShutdown">6.11.5.1 shutdown</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#MatrixServices">6.12 Matrix services</a>
    <ul>
      <li><a href="#MatrixServicesIntroduction">6.12.1 Introduction</a></li>
      <li><a href="#MatrixSet">6.12.2 set</a></li>
      <li><a href="#MatrixGet">6.12.3 get</a></li>
      <li><a href="#MatrixInverse">6.12.4 inverse</a></li>
      <li><a href="#MatrixTranspose">6.12.5 transpose</a></li>
      <li><a href="#MatrixMultiply">6.12.6 multiply</a></li>
      <li><a href="#MatrixMultiplyWithVector">6.12.7 multiplyWithVector</a></li>
    </ul>
  </li>
</ul>

<ul>
  <li><a href="#t-Topics">Table 6.1 &mdash; Topics</a></li>
  <li><a href="#t-Conventions">Table 6.2 &mdash; SAI request conventions</a></li>
  <li><a href="#t-updateControlSAIActionValues">Table 6.3 &mdash; updateControl SAIAction values</a></li>
  <li><a href="#t-registerBrowserInterestSAIActionValues">Table 6.4 &mdash; registerBrowserInterest SAIAction values</a></li>
  <li><a href="#t-StandardRenderingPropertyDefinitions">Table 6.5 &mdash; Standard rendering property definitions</a></li>
  <li><a href="#t-StandardPropertiesDescribingExtension">Table 6.6 &mdash; Standard properties describing extension capabilities</a></li>
  <li><a href="#t-changeViewpointSAIActionValues">Table 6.7 &mdash; changeViewpoint SAIAction values</a></li>
  <li><a href="#t-getNodeSAIActionValues">Table 6.8 &mdash; getNode SAIAction values</a></li>
  <li><a href="#t-namedNodeHandlingSAIActionValues">Table 6.9 &mdash; namedNodeHandling SAIAction values</a></li>
  <li><a href="#t-protoDeclarationHandlingSAIActionValues">Table 6.10 &mdash; protoDeclarationHandling SAIAction values</a></li>
  <li><a href="#t-externprotoDeclarationHandlingSAIActionValues">Table 6.11 &mdash; externprotoDeclarationHandling SAIAction values</a></li>
  <li><a href="#t-dynamicRouteHandlingSAIActionValues">Table 6.12 &mdash; dynamicRouteHandling SAIAction values</a></li>
  <li><a href="#t-rootNodeHandlingSAIActionValues">Table 6.13 &mdash; rootNodeHandling SAIAction values</a></li>
  <li><a href="#t-registerFieldInterestSAIActionValues">Table 6.14 &mdash; registerFieldInterest SAIAction values</a></li>
</ul>


</td>
</tr>
</tbody>
</table>
</div>

<h2><a name="ConventionsUsed"></a>
6.1.3 Conventions used</h2>

<p>Each of the services in this clause defines a
particular request that can be made
through the SAI. Each request is defined by a
number of characteristics.
In <a href="#t-Conventions">Table 6.2</a> the first column
defines each characteristic type and the second defines the properties
of that characteristic.</p>

<div class="CenterDiv">

<p class="TableCaption">
<a name="t-Conventions"></a>
Table 6.2 &mdash; SAI request conventions</p>

<table>
<tbody>
<tr>
<td><tt>parameters:</tt></td>
<td>first param data type, second param, <br>
[optional param data type], [multiple optional param data type]s</td>
</tr>
<tr>
<td><tt>returns:</tt></td>
<td>The list of return values data types or expected ranges</td>
</tr>
<tr>
<td><tt>errors:</tt></td>
<td>List of errors data types</td>
</tr>
<tr>
<td><tt>events:</tt></td>
<td>The first event&nbsp;<br>
The second event</td>
</tr>
<tr>
<td><tt>buffered:</tt></td>
<td>Simple yes, no or N/A</td>
</tr>
 <tr>
 <td><tt>external:</tt></td>
 <td>Yes if this is available only to an external interface, <br>
          No if it is available to both internal and external interfaces.</td>
</tr>
</tbody>
</table>
</div>

<p>Parameters are listed by data type and are shown separated by a comma (,) and 
a space. A parameter shown in square brackets [] indicates a single optional 
value of the data type specified within the brackets. The []s symbology, the 
brackets followed the &quot;s&quot; character, indicates multiple optional parameters of 
that type are allowed. For example, [SAIURL]s indicates that multiple instances 
of the data type SAIURL may be provided while [SAIURL] indicates that only a 
single SAIURL instance may be provided.</p>

<p>All characteristics defined for every service shall be implemented for
each language binding. At the end of each table, some explanatory text
will follow which includes extra information pertinent to the implementation
of that service.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="EstablishingAConnection"></a>
6.2 Establishing a connection</h1>

<h2><a name="EstablishConnectionIntro"></a>
6.2.1 Introduction</h2>

<p>The following services can be used to establish a session and obtain
a browser reference. Individual browser implementations may support one
or both of these methods. At least one shall be required to be supported.</p>

<h2><a name="getBrowser"></a>
6.2.2 getBrowser</h2>

<a name="t-getBrowser"></a>
<table class="services">
<tbody><tr class="services">
<td class="services">
<p class="Params"><code>parameters:</code></td>
<td class="services">
<p class="Params">SAIParameterList</td>
</tr>
<tr class="services">
<td class="services">
<p class="Params"><code>returns:</code></td>
<td class="services">
<p class="Params">SAIBrowserRef&nbsp;</td>
</tr>
<tr class="services">
<td class="services">
<p class="Params"><code>errors:</code></td>
<td class="services">
<p class="Params">SAI_BROWSER_UNAVAILABLE&nbsp;</td>
</tr>
<tr class="services">
<td class="services">
<p class="Params"><code>events:</code></td>
<td class="services">
<p class="Params">none</td>
</tr>
<tr class="services">
<td class="services">
<p class="Params"><code>buffered:</code></td>
<td class="services">
<p class="Params">N/A</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getBrowser</span> service returns a reference to an 
instance of an X3D browser through which other service requests may be 
processed.</p>

<p>This is a blocking call. No further requests from this external application
will be processed until an SAIBrowser value has been generated (which may
include the need to start a new instance of a X3D browser) or an error
condition is generated.</p>

<p>If an application makes a request for the same browser twice in the
same session then the same browser identifier shall be returned.</p>

<p>An implementation may define more than one variant of this service with
different parameter types. For example there may be alternate forms to
access a browser embedded in a HTML page and one for remote access from
another machine within the same language binding.</p>

<p>Additional error types may be added by individual language bindings
to deal with platform specific issues.</p>

<h2><a name="createBrowser"></a>
6.2.3 createBrowser</h2>

<table class="services">
<tbody class="services">
<tr class="services">
<td class="services">
<p class="Params"><code>parameters:</code></td>
<td class="services">
<p class="Params">SAIParameterList, SAIPropertyList</td>
</tr>
<tr class="services">
<td class="services">
<p class="Params"><code>returns:</code></td>
<td class="services">
<p class="Params">SAIBrowserApp</td>
</tr>
<tr class="services">
<td class="services">
<p class="Params"><code>errors:</code></td>
<td class="services">
<p class="Params">SAI_BROWSER_UNAVAILABLE</td>
</tr>
<tr class="services">
<td class="services">
<p class="Params"><code>events:</code></td>
<td class="services">
<p class="Params">none</td>
</tr>
<tr class="services">
<td class="services">
<p class="Params"><code>buffered:</code></td>
<td class="services">
<p class="Params">N/A</td>
</tr>
</tbody>
</table>

<p>The <span class="code">createBrowser</span> service creates a new instance of a browser application. The browser shall start
with no URL set (that is no active X3D scene graph). The URL may be set
at a later time using the <span class="code">loadURL</span> (see <a href="#loadURL">6.3.14 loadURL</a>)
or <span class="code">replaceWorld</span> (see
<a href="#replaceWorld">6.3.12 replaceWorld</a>) service requests.</p>

<p>The property list is used to define the properties of the browser application
itself. The service request shall use the same property list definitions
as those defined in <span class="code">loadURL </span>(see <a href="#loadURL">6.3.14 loadURL</a>). It is not required to support exactly the
same capabilities, but the property list format shall be identical and
any behaviours are identical.</p>

<p>This is a blocking request. No further requests from this external application
will be processed until an SAIBrowser value has been generated (which may
include the need to start a new instance of a X3D browser) or an error
condition is generated.</p>

<p>Each request of this service shall produce a new browser application
instance in accordance with the supplied parameter values.</p>

<p>An implementation may define more than one variant of this service with
different parameter types. For example there may be alternate forms to
start a browser on a remote machine or to create a new window within a
running application.</p>

<p>Additional error types may be added by individual language bindings
to deal with platform specific issues.</p>

<p>Individual language bindings may add extra calls to the <span class="code">SAIBrowserApp</span> to
get the language and platform-specific low-level handle.</p>
<p class="Example">EXAMPLE &nbsp;It may allow access to the raw image pixel data for 
an offline image renderer so that a user may use platform-specific calls to make 
extra drawing and compositing actions. </p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="BrowserServices"></a>
6.3 Browser services</h1>

<h2><a name="BrowserServiceIntroduction"></a>
6.3.1 Introduction</h2>

<p>The following services can be requested from a browser. Although not specified, all services are capable of throwing an SAI_CONNECTION_ERROR
whenever a request is made if the session between the application and the
browser has failed.</p>

<p class="Example">NOTE&nbsp; The data representation of the parameters or return values
is not specified. It could be equally valid to represent all parameters
as strings as it is for binary representations.</p>

<h2><a name="getName"></a>
6.3.2 getName</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIBrowserName</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getName</span> service returns the name of the browser. 
This name is implementation dependent. If this service is
not supported a <span class="code">NULL</span> value shall be returned.</p>

<h2><a name="getVersion"></a>
6.3.3 getVersion</h2>

<table class="services">

<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIBrowserVersion</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getVersion</span> service returns the current version 
of the browser application. The version number of the browser is implementation dependent. If this
service is not supported then a <span class="code">NULL</span> value shall be returned.</p>

<h2><a name="getCurrentSpeed"></a>
6.3.4 getCurrentSpeed</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAILayerID</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINavSpeed</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED<br>
SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getCurrentSpeed</span> service returns the navigation 
speed of the current world. The current speed is the average navigation speed for the currently bound
NavigationInfo node of the active layer in metres per second in the coordinate system of the
currently bound viewpoint.</p>

<h2><a name="getCurrentFrameRate"></a>
6.3.5 getCurrentFrameRate</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIFrameRate</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED<br>
SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getCurrentFrameRate</span> service returns the current frame display rate of the browser. If this is not supported,
the value returned is zero.</p>

<h2><a name="getSupportedProfiles"></a>
6.3.6 getSupportedProfiles</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIProfileDeclaration [SAIProfileDeclaration]s</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getSupportedProfiles</span> service returns the list of all profiles that are supported by this browser.
All browsers shall support at least one profile. &nbsp;It shall be an error
if the browser returns a declaration for a profile that it does not fully
support.</p>

<h2><a name="getProfile"></a>
6.3.7 getProfile</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIProfileDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED<br>
SAI_NOT_SUPPORTED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getProfile</span> service returns the declaration of the named profile. The 
value of the SAIString parameter is the
name of a profile from which to fetch the declaration  and shall conform exactly
to the name specified in <a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>. It shall be an error if
a name with wrong case, bad spelling, or anything other
than an exact match is provided. The browser is only required to return an SAIProfileDeclaration 
value 
if it supports the named profile. If it does not support the named profile, SAI_NOT_SUPPORTED 
shall be generated.</p>

<h2><a name="getSupportedComponents"></a>
6.3.8 getSupportedComponents</h2>

<table class=services>
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIComponentDeclaration [SAIComponentDeclaration]s</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getSupportedComponent</span> service returns a list of all components that are supported by this browser. All
browsers shall support at least one component, as
required to support profiles.</p>

<h2><a name="getComponent"></a>
6.3.9 getComponent</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIComponent</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIComponentDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED<br>
SAI_NOT_SUPPORTED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getComponent</span> service returns the declaration of the named component. The 
value of the SAIComponent parameter is the
name of a component and level from which to fetch the declaration and shall conform exactly
to the naming conventions used in the file format. It shall be an error if
the user provides a name with wrong case, bad spelling or anything other
than an exact match. The browser is only required to return a SAIComponentDeclaration 
value 
if it supports the named component and the requested level. If it does not 
support the component at the level desired, SAI_NOT_SUPPORTED shall be generated.</p>

<h2><a name="getExecutionContext"></a>
6.3.10 getExecutionContext</h2>

<table class="services">
<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED<br>
SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getExecutionContext</span> service returns the current execution context. 
If used in an internal interaction, this service returns the execution context 
in which the containing node exists (see <a href="concepts.html#ContainingNode">
4.4.3 Containing Node</a>). When used in an external interaction, this service 
returns the current top-level scene. </p>

<p>The execution context
is the base form of a scene, but only provides access to the local nodes, PROTOs 
and routes as defined by the X3D name scoping rules as defined in <i>4.4.7 Run-time 
name scope</i> in <a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>. Depending on the place in the scene graph, the returned type 
may be an instance of SAIScene
allowing the user to use the greater capabilities.</p>

<h2><a name="createScene"></a>
6.3.11 createScene</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef,&nbsp;[SAIProfileDeclaration],&nbsp;[SAIComponentDeclaration]s</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIScene</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED<br>
SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">createScene</span> service creates a new empty scene that conforms to the given profile and component
declarations. Although the specification does not require either be provided,
it shall be an error to provide neither profile nor component definitions.
A user shall provide at least one valid profile or component identifier to
this request.</p>

<p>A scene created this way shall always have its specification version
set to "3.0", &quot;3.1&quot;, or &quot;3.2&quot; (as appropriate) and the encoding set to "Scripted".</p>

<h2><a name="replaceWorld"></a>
6.3.12 replaceWorld</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIScene</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_SCENE<br>
SAI_DISPOSED<br>
SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_Browser_Shutdown&nbsp;
<br>SAI_Browser_Initialized</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">replaceWorld</span> service replaces the current world with the 
world specified by the SAIScene parameter. If another
<span class="code">replaceWorld</span> or <span class="code">loadURL</span> (see
<a href="#loadURL">6.3.14 loadURL</a>) request is made during the processing of the
current request, the current request is terminated and the new one started.
In this case, no extra shutdown event shall be generated. The initialize
event shall be generated at the point where the world is ready to be run.
The scene is not required to contain any valid content. Setting a value of
<span class="code">NULL</span> shall clear the currently set scene and leave a blank browser with no renderable content and no current scene.</p>

<p>The SAI_Browser_Shutdown event is generated immediately upon receiving this service
request.</p>

<p>The SAI_Browser_Initialized event is generated when the new nodes have been
set and all browser specific initialization has taken place but before
the first time driven event cascade has been started (event cascades may
have previously resulted due to the initialization process through internal
scripts).</p>

<h2><a name="importDocument"></a>
6.3.13 importDocument</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, DOMNode</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIScene</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_DOCUMENT<br>
SAI_DISPOSED<br>
SAI_INVALID_OPERATION_TIMING<br>
SAI_NOT_SUPPORTED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">
None<br>
</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">importDocument</span> service is a utility request to import a W3C DOM document or document fragment
and convert it to an X3D scene. The input allows any form of DOM Node as defined
by <a href="references.html#[W3CDOM2]">2.[W3CDOM2]</a>. Although all derived types are available,
it shall only be required that DOCUMENT, DOCUMENT_FRAGMENT, and ELEMENT types
are required to be supported for the conversion process.&nbsp; The method
only performs a conversion process and does not display the resulting scene.
The scene may then be used as the argument for
the <span class="code">replaceWorld</span> (see <a href="#replaceWorld">6.3.12 
replaceWorld</a>) service. When the conversion
is made, there is no lasting connection between the DOM and the generated
scene. Each request shall be a single conversion attempt (the conversion
may not be successful if the DOM does not match the X3D scene graph structure).</p>

<p>Support for this method is optional and shall be dependent on
the browser support for the XML encoding
(see <a href="references.html#[I19776_1]">ISO/IEC 19776-1</a>).
If the browser implementation supports the XML encoding, it shall support
this service. If the browser does not support the XML encoding, the implementation
may support this service. User code may check that this service is supported
through the checking the browser properties with the <span class="code">getBrowserProperties</span> service.
If this service is not supported by the browser implementation,
SAI_NOT_SUPPORTED error shall be generated.</p>

<h2><a name="loadURL"></a>
6.3.14 loadURL</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIURL [SAIURL]s, SAIPropertyList</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_URL<br>
SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_B_Shutdown<br>
SAI_B_Initialize<br>
SAI_B_URLError</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services">external:
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">loadURL</span> service inserts the content identified 
by the URL(s) in the current world under control of the contents of the 
SAIPropertyList instance.</p>

<p>The SAI_Browser_Shutdown event is generated immediately upon receiving this service
request if the parameter list is such that the browser is about to be shutdown
(<span class="example">EXAMPLE replaces an HTML Frame where the browser was embedded</span>).</p>

<p>The SAI_Browser_Initialized event is generated when the new nodes have been
set and all browser specific initialization has taken place but before
the first time driven event cascade has been started (event cascades may
have previously resulted due to the initialization process through internal
scripts).</p>

<p>The property list definition shall include at least one property that
defines loading the URL supplied as a new world in the supplied SAIBrowserRef.
If the property list is empty, the action is to replace the world of
the current browser with the new world if the successful URL is a X3D
file.</p>

<p>If another <span class="code">replaceWorld</span> (see
<a href="#replaceWorld">6.3.12 replaceWorld</a>) or <span class="code">loadURL</span> request is made during the processing
of the current request, the current request is terminated and the new one
started. In this case, no extra shutdown event shall be generated. The
SAI_Browser_Initialized event shall be generated at the point where the world is ready
to be run if <span class="code">replaceWorld</span> was called.</p>

<h2><a name="setDescription"></a>
6.3.15 setDescription</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>If the browser supports a description title, it shall be set to the new
description. Typically, this will be the title in a window title bar. In
cases where there may be multiple browsers on a single window, the result
is implementation dependent.</p>

<h2><a name="createX3DFromString"></a>
6.3.16 createX3DFromString</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIScene</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_X3D<br>
SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED<br>
SAI_NOT_SUPPORTED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">createX3DFromString</span> service creates nodes from a string. The string shall contain valid X3D syntax;
otherwise an error is generated. If any relative URLs are encountered in
this string,  the base is assumed to be the current browser location.
The string is not required to contain the X3D file header.
If it is present, it shall be treated as an indicator to
the version of X3D contained. If absent, the default version assumed
shall be that specified in <i>7.2.4.2 Header statement</i> in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>.
A browser is not required to support any versions
prior to ISO/IEC 19775.</p>

<p>If the string contains legal X3D statements but does not contain any node
instances,&nbsp; a valid SAIScene value shall still be returned containing no root
nodes, but with the appropriate declaration identifiers. For example the string may
contain EXTERNPROTO declarations but no instances of any node. If the SAIString
provides the content in an encoding format that the browser implementation
does not support,  the browser shall generate an SAI_NOT_SUPPORTED error.</p>

<h2><a name="createX3DFromStream"></a>
6.3.17 createX3DFromStream</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIStream</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIScene</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_X3D<br>
SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED<br>
SAI_NOT_SUPPORTED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">createX3DFromStream</span> service creates nodes from an arbitrary, user-provided stream of input data. The stream
shall contain valid X3D syntax from the first character; otherwise, an error
is generated. If any relative URLs are encountered in this string, the
base is assumed to be the current browser location. The stream is required
to include the X3D File Header in accordance with the encoding requirements
for the format.</p>

<p>If the string contains legal X3D statements but does not contain any node
instances,&nbsp;a valid SAIScene value shall still be returned containing no root
nodes, but with the appropriate declaration identifiers. For example, the string may
contain EXTERNPROTO declarations but no instances of any node.&nbsp;If the
stream identified by SAIStream provides the content in an encoding format that
the browser implementation
does not support,  the browser shall generate an SAI_NOT_SUPPORTED error.</p>

<h2><a name="createX3DFromURL"></a>
6.3.18 createX3DFromURL</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIURL [SAIURL]s</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIScene</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_URL<br>
SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_B_URLError</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">createX3DFromURL</span> service creates nodes from the contents of the file represented by the URL. The
URL may be a relative URL which is considered to be
using the browser location as
the base document. The scene described by that URL
shall be identified by the returned SAIScene value.</p>

<h2><a name="UpdateControl"></a>
6.3.19 updateControl</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIAction</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">N/A</td>
</tr><tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">Yes</td>
</tr>
</tbody>
</table>

<p>The <span class="code">updateControl</span> species the manner in which 
buffered updates are processed.</p>

<p>The SAIAction parameter specifies the actions that may be applied against the 
buffer. Other actions may be added,
such as to query the number of items, or the state of the buffer and are
implementation dependent. <a href="#t-updateControlSAIActionValues">Table 6.3</a> defines the actions specified in this part 
of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-updateControlSAIActionValues"></a>Table 6.3 &mdash; updateControl 
SAIAction values</p>

<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="2">updateControl</td>
  <td><span class="code">BeginUpdate</span></td>
</tr>
<tr>
  <td><span class="code">EndUpdate</span></td>
</tr>
</table>
</div>

<p>The timestamp of events generated at the call to <span class="code">EndUpdate</span> are implementation
dependent but should be consistent with the time within the current world.
That is, timestamps cannot be in the "past" relative to the other current
events generated internally with event model at the time when they are
generated.</p>

<p><span class="code">BeginUpdate</span> and <span class="code">EndUpdate</span> are not nesting calls. Once 
<span class="code">BeginUpdate</span>
has been called, it may be called any number of times, but only a single
<span class="code">EndUpdate</span> call is needed to release the buffered events into the scene graph.
A call to <span class="code">EndUpdate</span> without a previous matching 
<span class="code">BeginUpdate</span> has no effect.</p>

<h2><a name="RegisterBrowserInterest"></a>
6.3.20 registerBrowserInterest</h2>

<table class="services">
<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIAction, SAIRequester</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">Receiver of all SAIBrowserEvents</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">Yes</td>
</tr>
</tbody>
</table>

<p>The <span class="code">registerBrowserInterest</span> service nominates the requester as the receiver of all SAIBrowserEvents.
The act of making this service request itself does not imply any events
shall be generated.</p>

<p>The parameter of type SAIRequester could be inferred from the source
of the input and may not need to be part of the parameters and is implementation
dependent. Each binding to this service shall specify this requirement.</p>

<p>The parameter of type SAIAction specifies whether this is a request
to add interest in events, or to remove interest in the events.&nbsp; 
<a href="#t-registerBrowserInterestSAIActionValues">Table 6.4</a> 
defines the actions specified in this part of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-registerBrowserInterestSAIActionValues"></a>Table 6.4 &mdash; registerBrowserInterest SAIAction values</p>

<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="2">registerBrowserInterest</td>
  <td><span class="code">AddBrowserInterest</span></td>
</tr>
<tr>
  <td><span class="code">RemoveBrowserInterest</span></td>
</tr>
</table>
</div>

<p>Any change to the current browser shall be sent to the listener
that has registered interest in these events. These event notifications shall be made independent of the method of communicating with the browser.</p>

<p>As a minimum, a conforming implementation shall provide the events defined
in <a href="concepts.html#BrowserToExternalApp">4.5.3 Browser to 
External Application</a>.</p>

<h2><a name="getRenderingProperties"></a>
6.3.21 getRenderingProperties</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIPropertyList</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getRenderingProperties</span> service is used to query for the rendering capabilities of the browser. This
gives a list of the low-level hardware capabilities of the browser rather
than what X3D components are supported. For example, it will give the user
an idea of how many multitexture units can be handled and allows the end
user to customize the number of nodes to use in the MultiTexture node. The keys 
and values in the property list are implementation dependent and are for 
informative purposes only. <a href="#t-StandardRenderingPropertyDefinitions">
Table 6.5</a> lists the properties that are returned by this service. </p>

<center>
<p class="TableCaption"><a name="t-StandardRenderingPropertyDefinitions"></a>
Table 6.5 &mdash; Standard rendering property definitions</p>
</center>
<table style="WIDTH: 100%; TEXT-ALIGN: left" cellSpacing="2" cellPadding="2" border="1">
  <tr>
    <th vAlign="top">Property Name<br>
	</th>
    <th vAlign="top">Value data type<br>
	</th>
    <th vAlign="top">Description<br>
&nbsp;</th>
  </tr>
  <tr>
    <td vAlign="top">Shading</td>
    <td vAlign="top">String</td>
    <td vAlign="top">The type of shading algorithm in use. Typical values are 
    Flat, Gouraud, Phong, Wireframe. <br>
	</td>
  </tr>
  <tr>
    <td vAlign="top">MaxTextureSize</td>
    <td vAlign="top">String</td>
    <td vAlign="top">The maximum texture size supported. The format shall be 
    WIDTHxHEIGHT describing the number of pixels in each direction (for example 
    1024x1024).<br>
	</td>
  </tr>
  <tr>
    <td vAlign="top">TextureUnits<br>
	</td>
    <td vAlign="top">Integer</td>
    <td vAlign="top">The number of texture units supported for doing 
    multitexture.</td>
  </tr>
  <tr>
    <td vAlign="top">AntiAliased<br>
	</td>
    <td vAlign="top">Boolean<br>
	</td>
    <td vAlign="top">True or false if the rendering is currently anti-aliased or 
    not<br>
	</td>
  </tr>
  <tr>
    <td vAlign="top">ColorDepth<br>
	</td>
    <td vAlign="top">Integer</td>
    <td vAlign="top">The number of bits of colour depth supported by the screen. 
    Allows for optimized selection of textures, particularly for lower colour 
    depth screen capabilities. <br>
	</td>
  </tr>
  <tr>
    <td vAlign="top">TextureMemory</td>
    <td vAlign="top">Float</td>
    <td vAlign="top">The amount of memory in megabytes available for textures to 
    be placed on the video card.<br>
	</td>
  </tr>
</table>

<p>&nbsp;</p>

<p>The user shall not be able to directly effect the rendering properties of the 
browser by modifying the properties returned by this service.</p>

<h2><a name="getBrowserProperties"></a>
6.3.22 getBrowserProperties</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIPropertyList</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getBrowserProperties</span> service is used to query for the capabilities of the browser reference itself. This
gives a list of the expanded interfaces that this browser reference is capable
of supporting. For example it may be used to query for the existence of browser
implementation-specific extensions to the defined browser class or future
extensions as provided by this specification.</p>

<p><a href="#t-StandardPropertiesDescribingExtension">Table 6.6</a> defines some standard property names that are reserved by part of 
ISO/IEC 19775. Where a browser implementer chooses to add additional capabilities,
the naming convention of these additional properties shall follow the guidelines
defined in <i>4.1.3 Conventions</i> used in part 1 of of ISO/IEC 19775 (see
<a href="references.html#[I19775_1]">2.[I19775-1]</a>).</p>

<div class="CenterDiv">

<p class="TableCaption">
<a name="t-StandardPropertiesDescribingExtension"></a>Table 6.6 &mdash; Standard properties describing extension capabilities</p>

<table>
  <tbody>
    <tr>
<th>Property Name</th>
<th>Value data type<br>
&nbsp;</th>
<th>Description</th>
</tr>
<tr>
<td>ABSTRACT_NODES</td>
<td>Boolean</td>
<td>The browser implementation supports the ability to describe each node type 
with interfaces that correspond to the abstract node types as defined in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a> in 
addition to the basic requirement to support the X3DNode abstract type. This 
indicates that the browser supports at least Conformance Level 2.</td>
</tr>
<tr>
<td>CONCRETE_NODES</td>
<td>Boolean</td>
<td>The browser implementation supports the ability to describe each node type 
with interfaces that correspond to the concrete node types as defined in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a> in 
addition to the requirement to support all of the abstract types. This indicates 
that the browser supports at least Conformance Level 3.</td>
</tr>
 <tr>
<td>EXTERNAL_INTERACTIONS</td>
<td>Boolean</td>
<td>This SAIBrowserRef supports the additional services
required by external interfaces. A SAIBrowserRef provided to user code in
internal interactions shall not set this property.</td>
</tr>
<tr>
<td>PROTOTYPE_CREATE</td>
<td>Boolean</td>
<td>The browser implementation supports the ability to
dynamically create PROTO and EXTERNPROTO representations through service
requests. The basic service capability only allows the ability to create
instances of predefined PROTO structures read from a file format.</td>
</tr>
<tr>
<td>DOM_IMPORT</td>
<td>Boolean</td>
<td>The browser implementation supports the
<a href="#importDocument">importDocument</a> service request.</td>
</tr>
<tr>
<td>XML_ENCODING</td>
<td>Boolean</td>
<td>The browser supports XML as a file format encoding.</td>
</tr>
<tr>
<td>CLASSIC_VRML_ENCODING</td>
<td>Boolean</td>
<td>The browser supports the Classic VRML encoding.</td>
</tr>
<tr>
<td>BINARY_ENCODING</td>
<td>Boolean</td>
<td>The browser supports the binary file format encoding.</td>
</tr>
</tbody>
</table>
</div>

<p>&nbsp;</p>

<h2><a name="changeViewpoint"></a>
6.3.23 changeViewpoint</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIAction, SAILayerID</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr><tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">changeViewpoint</span> service changes the currently bound <i>X3DViewpointNode</i> 
instance on the specified Layer to the instance defined by the action. Valid action types are previous, next,
first and last. If a layer ID is not specified, the current activeLayer is used. When the viewpoint is changed using this service request,
the browser shall first unbind the current instance and then bind the new
instance. That is, the number of items on the bindable stack bindable
nodes shall not increase as a result of making this service request. 
<a href="#t-changeViewpointSAIActionValues">Table 6.7</a> 
defines the actions specified in this part of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-changeViewpointSAIActionValues"></a>Table 6.7 &mdash; changeViewpoint SAIAction values</p>

<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="4">changeViewpoint</td>
  <td><span class="code">Next</span></td>
</tr>
<tr>
  <td><span class="code">Previous</span></td>
</tr>
<tr>
  <td><span class="code">First</span></td>
</tr>
<tr>
  <td><span class="code">Last</span></td>
</tr>
</table>
</div>

<p>This service request implies that there is a standard, well-known ordering
of the <i>X3DViewpointNode</i> instances so that consistent visual behaviour
shall be observed. The order shall be based on the following rules:
</p>

<ol>
<li>The order is declared in the originally parsed file or stream, including
resolution of PROTO instances, but not including EXTERNPROTO or
<i>X3DInlineNode</i> instances.</li>
<li>Dynamically created node instances are always appended.</li>
<li>Instances located in <i>X3DInlineNode</i> instances and EXTERNPROTO
instances shall be in the order in which the external scene is resolved,
and appended to the list. The inclusion of these external instances
is also dependent on the browser property ListInlineViewpoints.</li>
</ol>

<p>An invalid SAILayerID shall result in the operation being ignored. Requests 
for SAILayerID values less than zero or greater than or equal to the number of 
defined layers are considered invalid and shall cause error 
SAI_INVALID_OPERATION_TIMING to be issued. </p>
<p>If the world only contains the default <i>X3DViewpointNode</i> instance,
this request has no effect in the visual output.</p>


<h2><a name="Print"></a>
6.3.24 print</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">print</span> service prints a message to the browser's console. The language-specific bindings
may provide overloaded variations on this service that do not take an SAIString 
value,
but take other data types. Other variants may include the ability to automatically
add linefeed/newline characters without the need to explicitly declare them
in the SAIString value. A binding shall provide at least the base SAIString variant 
and a variant that appends linefeed/newline characters.</p>

<p>User code may call this service at any time, without restriction, unless
the browser reference has been disposed of.</p>

<h2><a name="BrowserDispose"></a>
6.3.25 dispose</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_B_Shutdown</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">Yes</td>
</tr>
</tbody>
</table>

<p>The <span class="code">dispose</span> service indicates that the client is about to exit this session and the browser is free to dispose
of any resources that this client may have consumed. An SAI_Browser_Shutdown
event is sent only to this client and may be generated internally by the
language implementation on the client machine (that is, it is not required
that the browser itself generate this event, just that the event is generated).
If any events have been held because <span class="code">BeginUpdate</span> has been called, disposing
of the browser shall also call <span class="code">EndUpdate</span> to release those events to the
browser.</p>

<h2><a name="setBrowserOption"></a>6.3.26 setBrowserOption</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef, SAIString, SAIObject</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIBoolean</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">Yes</td>
</tr>
</tbody>
</table>

<p>The <span class="code">setBrowserOption</span> service allows setting options 
defined in <em>9.2.5 Browser options</em> in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>. The name field shall 
be one of the defined names in Table 9.2 in <a href="references.html#[I19775_1]">
ISO/IEC 19775-1</a>. This service shall return an SAIBoolean value indicating 
whether the change request was successful. A browser is not required to support 
dynamic changes to any options. If a browser option is not supported, a value of
<span class="style1">FALSE</span> shall be returned.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="ExecutionContextServices"></a>
6.4 Execution context services</h1>

<h2><a name="getSpecificationVersion"></a>
6.4.1 getSpecificationVersion</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The getSpecificationVersion returns the version string that describes to which specification version this
scene adheres. This version represents the appropriate version number
as defined  in <a href="references.html#[I14772_1]">ISO/IEC 14772-1</a>,
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>, or has value 1.0 for 
versions of VRML that precede the specification in 
<a href="references.html#[I14772_1]">ISO/IEC 14772-1</a> that are 
supported by the implementation.</p>

<h2><a name="getEncoding"></a>
6.4.2 getEncoding</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIEncoding</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getEncoding</span> service returns the encoding type that was used to produce the portion of the scene represented by the specified execution 
context. The encoding is one
of a fixed set, but may include additional types that are browser implementation
specific. The minimum required set of values (but not necessarily supported
by the browser implementation) shall be:</p>

<ol>
  <li><i>Scripted</i>: For scenes that are created completely through
the SAI and did not originate through a file somewhere.</li>
  <li><i>ASCII</i>: For VRML 1.0 specification files.</li>
  <li><i>VRML</i>: For VRML and the X3D Classic VRML encoding specified in
	<a href="references.html#[I19776_2]">ISO/IEC 19776-2</a>.</li>
  <li><i>XML</i>: For X3D XML-encoded files specified in
	<a href="references.html#[I19776_1]">ISO/IEC 19776-1</a>.</li>
  <li><i>Binary</i>: for X3D Binary-encoded files (reserved for future specification)</li>
  <li><i>BIFS</i>: For MPEG-4 BIFS-encoded format specified in
	<a href="references.html#[I14496_1]">ISO/IEC 14496-1</a>.</li>
</ol>

<h2><a name="ECgetProfile"></a>
6.4.3 getProfile</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIProfileDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getProfile</span> service returns the profile that is used to describe this scene. If the specification 
version is for a specification version prior to&nbsp;X3D, the profile shall be VRML. If no profile is provided, this shall
return <span class="code">NULL</span>.</p>

<h2><a name="getComponents"></a>
6.4.4 getComponents</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">[SAIComponentDeclaration]s</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getComponents</span> service returns the component(s) used to describe the scene. The list returned shall represent
only explicit component declarations and not the implied components from
the profile declaration. If no component definitions are set, <span class="code">NULL</span> shall
be returned.</p>

<h2><a name="getUnits"></a>
6.4.5 getUnits</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">[SAIUnitDeclaration]s</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">no</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">no</td>
</tr>
</tbody>
</table>

<p>The getUnits service returns all of the units used to describe the scene. The 
list returned shall represent all explicit unit declarations and the default 
units.</p>

<h2><a name="getWorldURL"></a>6.4.6 getWorldURL</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIURL</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">no</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">no</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getWorldURL</span> service returns the fully qualified URL of this scene. This returns
the entire URL including&nbsp; any possible arguments that might be associated
with a CGI call or similar mechanism. If the world was created
entirely programmatically,  the URL shall be <span class="code">NULL</span>.</p>

<h2><a name="getNode"></a>
6.4.7 getNode</h2>

<table class="services">
<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAIString, SAIAction</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NAME
<br>SAI_DISPOSED<br>
SAI_NODE_NOT_AVAILABLE</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getNode</span> service searches for a node based on 
specified criteria and returns an identifier for the node.</p>

<p>The SAIString is to identify the name of the node that has been
marked with one of the naming statements DEF, IMPORT or EXPORT in the currently
loaded X3D scene or previously added with an <span class="code">namedNodeHandling</span> request
(see <a href="#NamedNodeHandling">6.4.9 namedNodeHandling</a>).

</p>

<p>The SAIAction shall indicate which of the naming types shall be used to find
the node. For example, providing an action of <span class="code">ImportNode</span> shall not return
a name that may be valid, but describes a node named with the DEF statement.&nbsp; 
<a href="#t-getNodeSAIActionValues">Table 6.8</a> defines the actions specified in this part of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-getNodeSAIActionValues"></a>Table 6.8 &mdash; getNode SAIAction values</p>

<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="3">getNode</td>
  <td><span class="code">DEFNode</span></td>
</tr>
<tr>
  <td><span class="code">IMPORTNode</span></td>
</tr>
<tr>
  <td><span class="code">EXPORTNode</span></td>
</tr>
</table>
</div>

<p>Access shall only be available to names in this scene. DEFs in Inlined files shall not be accessible in accordance
with <i>4.4.3 DEF/USE Semantics</i>
and <i>4.4.6, Import/Export semantics</i> in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>.</p>

<p>If the SAIAction is <span class="code">IMPORTNode</span> and the name is 
valid but the node definition is not yet available from the source Inline node, SAI_NODE_NOT_AVAILABLE
shall be generated.</p>

<h2><a name="createNode"></a>
6.4.8 createNode</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED<br>
SAI_INVALID_NAME</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">createNode</span> service  creates a new default instance of the node given
by the SAIString value containing the name of an X3D node type. The availability 
of the node is defined by the containing scene&#39;s profile and component 
declarations. The name shall only refer to a built-in node and shall not be used 
to create instances of PROTOs or EXTERNPROTOs. If the node is not available in 
the currently specified profile and components, the browser shall issue the 
SAI_INVALID_NAME error. </p>

<h2><a name="createProto"></a>
6.4.9 createProto</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED<br>SAI_INVALID_NAME</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">createProto</span> service  creates a new default instance of the named PROTO.
The naming and scoping rules for creating a proto instance for which the current
execution context is inside another proto are defined by <i>4.4.7 Run-time name 
scope</i> in <a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>.
If there is no PROTO declaration available that matches the given name,&nbsp;the
browser shall generated the SAI_INVALID_NAME error.</p>

<h2><a name="NamedNodeHandling"></a>
6.4.10 namedNodeHandling</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAIAction, SAIAction, SAIString, <br>
[SAINode | SAIString, [SAIString]]</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED<br>
SAI_IMPORTED_NODE<br>
SAI_NODE_IN_USE<br>
SAI_INVALID_NAME</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">namedNodeHandling</span> service is a request to add, remove, or update the node identified by the SAIString 
value where
that name is considered to use the DEF, or IMPORT semantics. The add/remove/update
shall be described by the first SAIAction value. If the name already exists as a 
mapping, the current mapping is replaced with the new mapping. When adding a new 
named node, the new named node is not required to be part of this scene. </p>

<p>The second SAIAction value describes which of the DEF or IMPORT naming facilities 
shall be the target of this service request. This ensures that correct semantics 
are applied. If the action is to add and the name is already registered, SAI_NODE_IN_USE is generated. If the action is to replace
or update, and the node is not already registered, the implementation may
treat this as an add request. <a href="#t-namedNodeHandlingSAIActionValues">
Table 6.9</a> defines the actions specified in this 
part of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-namedNodeHandlingSAIActionValues"></a>Table 6.9 &mdash; namedNodeHandling SAIAction values</p>
<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="6">namedNodeHandling</td>
  <td><span class="code">AddDEFNode</span>/<span class="code">UpdateDEFNode</span></td>
</tr>
<tr>
  <td><span class="code">RemoveDEFNode</span></td>
</tr>
<tr>
  <td><span class="code">AddIMPORTNode</span>/<span class="code">UpdateIMPORTNode</span></td>
</tr>
<tr>
  <td><span class="code">RemoveIMPORTNode</span></td>
</tr>
<tr>
  <td><span class="code">AddEXPORTNode</span>/<span class="code">UpdateEXPORTNode</span></td>
</tr>
<tr>
  <td><span class="code">RemoveEXPORTNode</span></td>
</tr>
</table>
</div>

<p>The first SAIString value identifies a name with a node
as it should be known in this scene. The name is not an intrinsic
property of the node and this only serves as a mapping function.</p>

<p>The second argument provides an option depending on the action being
undertaken. SAINode value is a reference to the node that 
may be needed for verification
of the DEF name addition. For adding IMPORTs, the second string shall be
the exported node name in the DEF'd inline and the optional third string shall 
be the name to store it as in this scene.</p>

<h2><a name="getProtoDeclaration"></a>
6.4.11 getProtoDeclaration</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIProtoDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NAME<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getProtoDeclaration</span> service returns the named PROTO declaration representation from this scene. This
shall only be used to request  PROTO declarations. A request for an EXTERNPROTO
declaration shall generate SAI_INVALID_NAME.</p>

<h2><a name="ProtoDeclarationHandling"></a>
6.4.12 protoDeclarationHandling</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAIString, SAINode, SAIAction</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">protoDeclarationHandling</span> service is a request to add, remove or change the ProtoDeclaration
identified by the SAIString value.</p>

<p>The SAIAction parameter specifies whether the service request is an
add or removal of the declaration node. If the name already exists as a mapping,

the current mapping is replaced with the new map.
When adding a new declaration it may come from another scene. 
<a href="#t-protoDeclarationHandlingSAIActionValues">Table 6.10</a> defines 
the actions specified in this part of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-protoDeclarationHandlingSAIActionValues"></a>Table 6.10 &mdash; protoDeclarationHandling SAIAction values</p>
<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="2">protoDeclarationHandling</td>
  <td><span class="code">AddProto</span>/<span class="code">UpdateProto</span></td>
</tr>
<tr>
  <td><span class="code">RemoveProto</span></td>
</tr>
</table>
</div>

<h2><a name="getExternProtoDeclaration"></a>
6.4.13 getExternProtoDeclaration</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIProtoDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NAME&nbsp;
<br>SAI_URL_UNAVAILABLE&nbsp;
<br>SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getExternProtoDeclaration</span> service returns the named EXTERNPROTO declaration representation from 
this scene. &nbsp;This shall only be used to request an EXTERNPROTO declaration. A request for a PROTO
declaration shall generate SAI_INVALID_NAME.</p>

<h2><a name="ExternProtoDeclarationHandling"></a>
6.4.14 externprotoDeclarationHandling</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAIString, SAINode, SAIAction</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">externprotoDeclarationHandling</span> service is a request to add, remove or update the ExternProtoDeclaration
identified by the SAIString value.</p>

<p>The SAIAction parameter is used to indicate if the service request is an
add or removal of the declaration node. If the name already exists as a mapping,

the current mapping is replaced with the new map.
When adding a new declaration, it may come from another scene. 
<a href="#t-externprotoDeclarationHandlingSAIActionValues">Table 6.11</a> defines 
the actions specified in this part of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-externprotoDeclarationHandlingSAIActionValues"></a>Table 6.11 &mdash; externprotoDeclarationHandling SAIAction values</p>

<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="2">externprotoDeclarationHandling</td>
  <td><span class="code">AddExternProto</span>/<span class="code">UpdateExternProto</span></td>
</tr>
<tr>
  <td><span class="code">RemoveExternProto</span></td>
</tr>
</table>
</div>

<h2><a name="getRootNodes"></a>
6.4.15 getRootNodes</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINodes</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NAME<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getRootNodes</span> service returns a listing of the current root nodes of the execution context.
If the context was generated from a file, the root nodes
are in the order they were declared
in the file. Any added nodes are then appended to the list in the time order
they were received at the browser. If the context was generated programmatically,
the nodes are in the order they were received by the browser.</p>

<h2><a name="getRoutes"></a>
6.4.16 getRoutes</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIRoutes</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getRoutes</span> service gets the list of the current routes in the scene. The route listing returned
will only be the top level routes. Routes contained within a PROTO definition
or a prototype instance shall not be included in this list.</p>

<h2><a name="DynamicRouteHandling"></a>
6.4.17 dynamicRouteHandling</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext, SAINode, SAIField, SAINode, SAIField, SAIAction</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NODE<br>
SAI_INVALID_FIELD<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">dynamicRouteHandling</span> service is a request to 
process a route according to the action specified by the SAIAction value.</p>

<p>The parameter of type SAIAction specifies whether this should be an add
or delete of this route. Other actions may be added, such as to query the
existence of the nominated route. Actions defined by this part of ISO/IEC 19775 
are described in <a href="#t-dynamicRouteHandlingSAIActionValues">Table 6.12</a>. The 
SAINode/SAIField pair parameters are 
considered as defining the source field and destination fields for the route 
request.</p>

<p class="TableCaption" align="center">
<a name="t-dynamicRouteHandlingSAIActionValues"></a>Table 6.12 &mdash; dynamicRouteHandling SAIAction values</p>

<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="2">dynamicRouteHandling</td>
  <td><span class="code">AddRoute</span></td>
</tr>
<tr>
  <td><span class="code">DeleteRoute</span></td>
</tr>
</table>
</div>

<p>Route modification requests are to fit with the general event model
scheme as defined in <i>4.4.8 Event model</i> in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>. The end of the event cascade is
considered to be the cascade that is initiated by the application sending
events into the X3D browser environment. Any new cascades generated as
a result of the processing of the initial events  shall not be considered
for the determination of the event cascade.</p>

<p>If the action is to delete a route, and the route has previously been
deleted, no error should be generated.</p>

<h2><a name="ExecutionContextDispose"></a>
6.4.18 dispose</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIExecutionContext</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_B_Shutdown</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">Yes</td>
</tr>
</tbody>
</table>

<p>The <span class="code">dispose</span> service specifies that the client has no further interest in the resource represented by this execution
context. The browser may now take whatever action is necessary to
reclaim any resources consumed by this&nbsp;execution context, now or at any time
in the future. If this&nbsp;execution context has already been disposed,
further requests have no effect.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="SceneServices"></a>
6.5 Scene services</h1>

<h2><a name="SceneIntroduction"></a>
6.5.1 Introduction</h2>

<p>A scene is an extension of the execution context services with  additional
services provided. The Scene services implementation shall include all of the services
from <a href="#ExecutionContextServices">6.4 Execution context services</a>, and include the following additional
services.</p>

<h2><a name="getMetaData"></a>
6.5.2 getMetadata</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIScene, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getMetadata</span> service returns an item of metadata 
from the scene that was specified using the META statement defined in 7.2.5.5 
META statement in <a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>. Metadata specified in 
the META statement is represented
as an SAIString key/value pair. Each key corresponds to exactly zero or one
value.  </p>

<p>Optionally, the browser may provide a subservice to discover the valid
keys for this scene as part of this service.</p>

<p>Metadata defined by metadata nodes as defined in Part 1 of ISO/IEC 19775 can 
be manipulated using <a href="#NodeServices">6.6 Node services</a>.</p>

<h2><a name="setMetaData"></a>
6.5.3 setMetadata</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIScene, SAIString, SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">setMetadata</span> service inserts an item of metadata in the scene 
in the form of a META statement as defined in 7.2.5.5 META statement in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>. Metadata is  represented
as a SAIString key/value pair. Each key corresponds to exactly zero or one
value. Setting an item with a key that already exists replaces the existing
value. If the value is <span class="code">NULL</span> for the given key, the 
META statement associated with that key is removed from
the scene.</p>

<p>Metadata defined by metadata nodes as defined in 
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a> can 
be manipulated using <a href="#NodeServices">6.6 Node services</a>.</p>

<h2><a name="SceneNamedNodeHandling"></a>
6.5.4 namedNodeHandling</h2>

<p>In addition to the capabilities described
in <a href="#NamedNodeHandling">6.4.9 namedNodeHandling</a>,
the Scene services expand the capability to also work with exporting nodes.
The definition is expanded to the following:</p>

<p>The <span class="code">namedNodeHandling</span> service is a request to add, remove or change the node identified by the SAIString 
value where
that name is considered to use the DEF, or
IMPORT or EXPORT semantics. The add/remove/update
shall be described by the first SAIAction parameter value. If the name already exists as
a mapping,  the current mapping is replaced with the new mapping. When adding
a new named node, it is not required to be a part of this scene.</p>

<p>The second SAIAction parameter value describes which of the DEF, IMPORT or EXPORT naming
facilities shall be the target of this service request. This ensures that
correct semantics are applied. If the action is to add and the name is already
registered then SAI_NODE_IN_USE is generated. If the action is to replace
or update, and the node is not already registered, the implementation may
treat this as an add request.</p>

<p>The first SAIString value specifies a name with a node as
it should be known in this scene. The name is not an intrinsic
property of the node and this only serves as a mapping function.</p>

<p>The second argument provides an option depending on the action being undertaken.
The SAINode value is a reference to the node that  may be needed for verification of an
EXPORT or DEF name addition. For adding IMPORTs, the second string shall
be the exported node name in the DEF'd inline and the optional third string
shall be the name to store it as in this scene (this corresponds with the
Classic VRML syntax of <i>IMPORT inlined_def.export_name [AS import_name]</i>). For
adding EXPORTs the second argument shall be the string, which is the optional
name to export the node as. If the first SAIString does not describe a node
marked with DEF, it shall generate a SAI_INVALID_NAME error.</p>

<h2><a name="RootNodeHandling"></a>
6.5.5 rootNodeHandling</h2>

<table class="services">
<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIScene, SAINode, SAIAction</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NODE<br>
SAI_DISPOSED<br>
SAI_IMPORTED_NODE<br>
SAI_NODE_IN_USE<br>
SAI_INSUFFICIENT_CAPABILITIES</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">rootNodeHandling</span> service is a request to add and remove the root nodes of this scene.
The root node may contain an entire sub-&quot;scene graph&quot; below it.</p>

<p>The SAIAction parameter is used to indicate if the service request is an add
or removal of the node. If the action is to remove and the node is not a
known root node, this shall generate an error. If the action is to add
the node, it shall be appended to the current list of root nodes. 
<a href="#t-rootNodeHandlingSAIActionValues">Table 6.13</a> 
defines the actions specified in this part of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-rootNodeHandlingSAIActionValues"></a>Table 6.13 &mdash; rootNodeHandling SAIAction values</p>
<div class="CenterDiv">
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="2">rootNodeHandling</td>
  <td><span class="code">AddRootNode</span></td>
</tr>
<tr>
  <td><span class="code">RemoveRootNode</span></td>
</tr>
</table>
</div>

<p>Nodes are bound by the capabilities of the containing scene. No node shall
be of greater capabilities than the scene's declared profile and additional
components. SAI_INSUFFICIENT_CAPABILITIES shall be generated if the action
is to add a node to the scene and that node requires greater capabilities than
the scene permits.</p>

<p>If the action is to add a node and the node or any of its children is
currently part of another scene, generate SAI_NODE_IN_USE.</p>

<p>If the action is to remove a node and the node is not a known value
of this field, the request shall be silently ignored.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="NodeServices"></a>
6.6 Node services</h1>

<h2><a name="NodeServicesIntro"></a>
6.6.1 Introduction</h2>

<p>The following services can be requested of an individual node. Each service
requires an identifier for that node. After a request of
an individual node to dispose of their resources, any further request made
to a node service shall generate&nbsp;a disposed error.</p>

<p>Although not specified, all services are capable of throwing an SAI_CONNECTION_ERROR
whenever a request is made if the session between the application and the
browser has failed.</p>

<h2><a name="NodeServicesgetTypeName"></a>6.6.2 getTypeName</h2>

<table class="services">
<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getTypeName</span> service returns the name of the type of the 
referenced node. The type name is the name as specified in ISO/IEC 
19775-1 where the node type is defined (see <i>Node index</i> in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a> for easy access to 
a node definition).
If the node represents a PROTO node instance, the type name returned is the name of the PROTO declaration.</p>

<h2><a name="getType"></a>
6.6.3 getType</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINodeType</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getType</span> service returns the type indicator for 
the referenced node. The type indicator is either the type defined for the basic node types
in the X3D specification, or the PROTO type name if it is a prototyped
node. This is not required to be supported for a conforming implementation.</p>

<h2><a name="getField"></a>
6.6.4 getField</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode, SAIFieldName</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIField</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NAME&nbsp;
<br>SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getField</span> service returns a field identifier so that operations can be performed on the node
properties. If the field requested is an inputOutput field, either
the field name or the set_ and _changed modifiers may be used to access
the appropriate form of the node as required. Access to fields is
implementation dependent.</p>

<h2><a name="NodeGetFieldDefinitions"></a>
6.6.5 getFieldDefinitions</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINodeType</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIFields</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NAME&nbsp;
<br>SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getFieldDefinitions</span> service returns a list of 
all the field definitions of the referenced node. The definitions
provide a limited form of the SAIField that has all the same services except the 
ability to read or write the value of the field for a specific node instance. 
This request returns the SAIField values as generic responses for every instance of 
this node rather than for a specific instance.</p>

<h2><a name="NodeDispose"></a>
6.6.6 dispose</h2>

<table class="services">
<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">dispose</span> node service indicates that the client has no further interest in the resource represented by this
node. The browser may take whatever action is necessary to reclaim
any resources consumed by this node, now or at any time in the future. If this
node has already been disposed, further requests have no effect.</p>

<p>Disposing of a node does not remove the node from the scene graph (if
it was inserted in the first place) but rather removes any local information
per client to it. The underlying X3D node representation is only disposed

if no other applications or scene graph structures contain references
to this node and the responsibility and timing for this action is browser
implementation specific.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="FieldServices"></a>
6.7 Field services</h1>

<h2><a name="FieldServicesIntro"></a>
6.7.1 Introduction</h2>

<p>The following are services that can be requested of individual fields of
a node. If the node from which a field was retrieved  has been disposed,
field services are still permitted to operate providing that the field
reference has been obtained before disposing of the node. If a call is
made to a field service after requesting disposal of the field, a disposed
error shall be generated.</p>

<p>Although not specified, all services are capable of throwing an SAI_CONNECTION_ERROR
whenever a request is made if the session between the application and the
browser has failed.</p>

<h2><a name="getAccessType"></a>
6.7.2 getAccessType</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode, SAIField</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIFieldAccess</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getAccessType</span> service returns the access type 
for the specified field of the referenced node.</p>

<h2><a name="FieldServicesgetType"></a>
6.7.3 getType</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode, SAIField</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIFieldType</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getType</span> field service returns the type for the 
specified field of the referenced node.</p>

<h2><a name="FieldServicesgetName"></a>
6.7.4 getName</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode, SAIField</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIFieldName</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>If supported by the implementation, the <span class="code">getName</span> 
field service returns the name of the field
as it was requested from the node. If the service requested the <i>set_children</i>
field of a grouping node, this shall return "set_children", but if a different
request was for <i>children</i> on the same node, "children" shall be returned.</p>

<h2><a name="getValue"></a>
6.7.5 getValue</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode, SAIField</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIFieldValue</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_ACCESS_TYPE<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getValue</span> field service returns the value 
represented by the specified field as it exists in the world. This

represents the current value of the field at the time of the request.
If the request is made of a field that has a setValue request buffered
through <span class="code">BeginUpdate</span>, the value returned shall be the old value prior to
the setValue request. The value of the field may be a node if the field
represents an MFNode or SFNode.</p>

<p>All field types shall support the option to return a single
value from multi-valued arrays.</p>

<h2><a name="setValue"></a>
6.7.6 setValue</h2>

<table class="services">
<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode, SAIField, SAIFieldValue</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_ACCESS_TYPE<br>
SAI_IMPORTED_NODE<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">setValue</span> field service sets the value of the specified field. Set requests shall obey the requirements as
specified for buffered events services.</p>

<p>The value of the field may be an SAINode value if the field represents an MFNode
or SFNode. It is permitted to send a <code>null</code> to a node or field in
order to clear the value from that field. For example sending a <code>null</code>
to the appearance inputOutput field of a Shape node as specified in <i>12 Shape 
component</i> in part 1 of ISO/IEC 19775 (see <a href="references.html#[I19775_1]">
2.[I19775-1]</a>), shall result in the <i>appearance</i>
field being cleared and set to the default value of <code>NULL</code>.</p>

<p>If the SAINode value is registered as an IMPORTed node in this file,
it shall generate the SAI_IMPORTED_NODE error.</p>

<p>All field setting services implementations shall include the ability to
set individual values. Fields that describe multi-value arrays shall also
include the ability to append and remove items from the existing field.</p>

<h2><a name="RegisterFieldInterest"></a>
6.7.7 registerFieldInterest</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode, SAIField, SAIAction, SAIRequester</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_ACCESS_TYPE<br>
SAI_INSUFFICIENT_CAPABILITIES<br>
SAI_NODE_IN_USE<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAIFieldEvent</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">registerFieldInterest</span> service nominates the requester as the receiver of all SAIFieldEvents.
The act of making this service request itself does not imply any events
shall be generated.&nbsp;<a href="#t-registerFieldInterestSAIActionValues">Table 
6.14</a> defines the actions specified in this part 
of ISO/IEC 19775.</p>

<p class="TableCaption" align="center">
<a name="t-registerFieldInterestSAIActionValues"></a>Table 6.14 &mdash; registerFieldInterest SAIAction values</p>
<div class=CenterDiv>
<table>
<tr>
  <th>Service</th>
  <th>Action Type</th>
</tr>
<tr>
  <td rowspan="2">registerFieldInterest</td>
  <td><span class="code">AddInterest</span></td>
</tr>
<tr>
  <td><span class="code">RemoveINterest</span></td>
</tr>
</table>
</div>

<p>The parameter of type SAIRequester can be inferred from the source
of the input and may not need to be part of the parameters.</p>

<p>The parameter of type SAIAction specifies whether this is a request
to add interest&nbsp;in events or to remove interest in the events.</p>
<p>Which capabilities are permitted to be listened to are implementation
dependent. For example, some implementations may permit listening to inputOnly
values and outputOnly values while others will only permit listening to outputOnly values.</p>

<p>For SFNode and MFNode field types, the following
additional behaviour is specified:</p>

<blockquote>Nodes are bound by the capabilities of the containing scene. No node shall
be of greater capabilities than the scene's declared profile and additional
components. SAI_INSUFFICIENT_CAPABILITIES shall be generated if the action
is to add a node to the scene and that node requires greater capabilities than
the scene permits.</blockquote>

<p>If the action is to add a node, and the node or any of its children
is currently part of another scene, an SAI_NODE_IN_USE error shall be generated.</p>

<p>If the action is to remove a node and the node is not a
known value of this field, the request shall be silently ignored.</p>

<h2><a name="FieldDispose"></a>
6.7.8 dispose</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIField</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">dispose</span> field service indicates that the client has no further interest in the resource represented by this field.
The browser may take whatever action is necessary to reclaim any
resources consumed by this field, now or at any time in the future. If this field
has already been disposed, further requests have no effect.</p>

<p><img src="../Images/x3dbar.png" alt="--- X3D separator bar ---" height="25" width="470">
</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="RouteServices"></a>
6.8 Route services</h1>

<h2><a name="getSourceNode"></a>
6.8.1 getSourceNode</h2>

<table class="services">
<tbody><tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIRoute</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external</code>:</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getSourceNode</span> service returns the source node of 
the specified route.</p>

<h2><a name="getSourceField"></a>
6.8.2 getSourceField</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIRoute</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getSourceField</span> service returns the name of the source field of 
the specified route.</p>

<h2><a name="getDestinationNode"></a>
6.8.3 getDestinationNode</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIRoute</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getDestinationNode</span> service returns the destination node of the 
specified route.</p>

<h2><a name="getDestinationField"></a>
6.8.4 getDestinationField</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIRoute</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getDestinationField</span> service returns the name of the destination field of the 
specified route.</p>

<h2><a name="RouteDispose"></a>
6.8.5 dispose</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIRoute</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">Yes</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">dispose</span> route service indicates that the client has no further interest in the resource represented by this route.
The browser may take whatever action is necessary to reclaim any
resources consumed by this route, now or at any time in the future. If this route
has already been disposed, further requests have no effect.
<p>Disposing of a route does not remove the route from the scene graph (if
it was inserted in the first place) but rather removes any local information
per client to it. The underlying X3D node representation is only disposed
of if no other applications or scene graph structures contain references
to this route and the responsibility and timing for this action is browser
implementation specific.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="PrototypeServices"></a>
6.9 Prototype services</h1>

<h2><a name="isExternProto"></a>
6.9.1 isExternproto</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIProtoDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIBoolean</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">isExternproto</span> service checks to see if the prototype declaration represents a PROTO or EXTERNPROTO.
If it is an EXTERNPROTO, a <span class="code">TRUE</span> value shall be returned, and PROTO declarations
shall return <span class="code">FALSE</span>.</p>

<h2><a name="CreateInstance"></a>
6.9.2 createInstance</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIProtoDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAINode</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_INVALID_NODE<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">createInstance</span> service creates a new instance from the declaration of either a PROTO or EXTERNPROTO.
An EXTERNPROTO instance may fail with SAI_INVALID_NODE if the definition
has not yet been loaded.</p>

<h2><a name="protoGetFieldDefinitions"></a>
6.9.3 getFieldDefinitions</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIProtoDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIField(s)</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getFieldDefinitions</span> service returns a list of all the field definitions of the PROTO or EXTERNPROTO declaration. The definitions
provide a limited form of the SAIField value that has all the same services except
the ability to read or write the value of the field for
a specific node instance.</p>

<h2><a name="CheckLoadState"></a>
6.9.4 checkLoadState</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIProtoDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAILoadState</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_INVALID_NODE<br>
SAI_INVALID_URL<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">checkLoadState</span> service checks on the current load state of the EXTERNPROTO definition. The state
shall be one of NOT_STARTED, IN_PROGRESS, COMPLETE or FAILED.  If this
is called on a PROTO, a SAI_INVALID_NODE error shall be generated.</p>

<h2><a name="RequestImmediateLoad"></a>
6.9.5 requestImmediateLoad</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIProtoDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code><br>
</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>If the SAIProtoDeclaration value represents an EXTERNPROTO, the
<span class="code">requestImmediateLoad</span> service requests that the browser start immediate
loading of that definition. If the definition is already loaded or the
load is already in progress, this request shall be silently ignored.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="ConfigurationServices"></a>6.10 Configuration services</h1>

<h2><a name="ConfigurationServicesIntroduction"></a>6.10.1 Introduction</h2>

<p>The services specified here allow an application to identify the 
configuration of the current world.</p>

<p>An SAIComponentDeclaration value specifies a component declaration containing 
the information specified by the COMPONENT statement as defined by 7.2.5.4 
COMPONENT statement in <a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>. The services defined are the minimum required. An 
implementation may provide additional informational-only services.</p>

<p>An SAIProfileDeclaration value specifies a profile declaration containing the 
information specified by the PROFILE statement as defined by 7.2.5.3 PROFILE 
statement in <a href="references.html#[I19775_1]">ISO/IEC 19775-1</a> and by the profile definition contained in the annexes of 
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>. The services defined are the minimum required. An 
implementation may provide additional informational-only services.</p>

<h2><a name="getComponentName"></a>6.10.2 getComponentName</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIComponentDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getComponentName</span> service returns the formal name of the specified 
component.</p>

<h2><a name="getComponentLevel"></a>6.10.3 getComponentLevel</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIComponentDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getComponentLevel</span> service returns the support level specified for the 
component. When the SAIComponentDeclaration comes from the browser services, it 
shall represent the maximum level supported by the browser. When it comes from 
the scene services, the level represents the requested support level for that 
scene.</p>

<h2><a name="getProfileName"></a>6.10.4 getProfileName</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIProfileDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getProfileName</span> service returns the formal name of the specified profile.</p>

<h2><a name="getProfileComponents"></a>6.10.5 getProfileComponents</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIProfileDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIComponentDeclaration(s)</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getProfileComponents</span> service returns a list of 
SAIComponentDeclaration instances 
specifying the allowed support for each component of which the profile is 
comprised.</p>

<h2><a name="getProviderName"></a>6.10.6 getProviderName</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIProfileDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code><br>
</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getProviderName</span> service is an information-only service that returns an 
SAIString value containing the name of the person or company that implemented this 
profile.</p>

<h2><a name="getUnitCategory"></a>6.10.7 getUnitCategory</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIUnitDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getUnitCategory</span> service returns the formal 
category of the specified unit declaration.</p>

<h2><a name="getUnitConversion"></a>6.10.8 getUnitConversion</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIUnitDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code><br>
</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getUnitConversion</span> service returns the 
conversion factor of the specified unit declaration.</p>

<h2><a name="getUnitName"></a>6.10.9 getUnitName</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIUnitDeclaration</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">SAIString</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">SAI_INVALID_OPERATION_TIMING<br>
SAI_DISPOSED</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code><br>
</td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">getUnitName</span> service returns the user-provided 
name of the specified unit declaration.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="ServicesByScriptContent"></a>
6.11 Services provided by script content</h1>

<h2><a name="ScriptContentIntroduction"></a>6.11.1 Introduction</h2>

<p>When an author provides the executable content
of a script, certain conventions shall be satisfied. This allows the browser to communicate  status information 
unambiguously&nbsp;
regardless of the type of content language. This clause defines services
that are required to be defined by the individual language bindings in a
manner such that script content may be informed in a consistent, unambiguous manner.
Script content shall be required to run identically regardless of language
used to author the content. In contrast to the other services specifications,
the browser shall make these service requests of the user's code, and therefore
the user code shall provide implementations of these, where necessary. All
services are defined at the user's discretion and if the user does not define
the service implementation, the browser shall silently continue.</p>

<h2><a name="ScriptContentCreation"></a>
6.11.2 Creation phase</h2>

<p>During the creation phase, the script content is downloaded and an instance
of the content created in the appropriate execution engine. Some content
may require separate interpreters, while others may be created in the same
address and execution space as the browser code (e.g., scripts created in the
same language in which the browser itself was written). Apart from the instantiation
process, which is language dependent, the browser shall not require any services.

<h2><a name="ScriptContentSetup"></a>6.11.3 Setup phase</h2>

<p>During the setup phase, the browser provides the script with all of the run-time
information that it will be able to use in the system.</p>

<h3><a name="setBrowser"></a>
6.11.3.1 setBrowser</h3>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">setBrowser</span> service passes to the script implementation code the  the SAIBrowserRef 
value
to be used.  There is no other way of acquiring the SAIBrowserRef during 
the lifetime of the script, so if the user code needs to know about it, it 
should store it now. This service shall be performed before any other service 
requests are made. The browser may call this service at any time between
the creation phase and before the Initialize service request is made. The
browser is not required to request it during the initialization process as
defined <i>4.4.8 Event model</i> in <a href="references.html#[I19775_1]">ISO/IEC 
19775-1</a>
although that is time when the Browser implementers are encouraged to request 
this service.</p>

<h3><a name="setFields"></a>
6.11.3.2 setFields</h3>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAINode, SAIField(s)</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">setFields</span> script service passes in the list of fields declared in this script node instance. 
It also passes
in the external view of the containing script node so that the user may add
and remove routes to the script directly. The SAIField instances represent all of the 
fields of a script, including the pre-defined fields. (See
<a href="concepts.html#UpdatingTheSceneGraph">4.8.3.4 Updating the scene graph</a> 
for details on the field access restrictions). This request shall be performed 
between the setBrowser and initialize service requests.</p>

<h3><a name="Initialize"></a>6.11.3.3 initialize</h3>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">initialize</span> script service provides notification to the script that all basic initialization has been completed
and that the user code is active in the scene graph.&nbsp;  At this point, the user code may access script field values and 
change the state of the script.</p>

<h2><a name="ScriptContentRealised"></a>
6.11.4 Realized phase</h2>

<h3><a name="prepareEvents"></a>
6.11.4.1 prepareEvents</h3>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">Yes</td>
</tr>
</tbody>
</table>

<p>The <span class="code">prepareEvents</span> service provides notification that the browser is about to start the event cascade processing
in accordance with step 4 of the event execution model as described
in <i>4.4.8.3 Execution model</i> in <a href="references.html#[I19775_1]">
ISO/IEC 19775-1</a>.
All values changed during this call shall have the current time stamp, but
events shall not be immediately propagated upon return from the user code.
This service request shall be called every frame regardless of whether the
containing node received any events. If the containing node
provides directOutputs, these shall be passed immediately to the underlying
nodes.</p>

<h3><a name="eventsProcessed"></a>
6.11.4.2 eventsProcessed</h3>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIBrowserRef</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_Browser_Shutdown</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">Yes</td>
</tr>
</tbody>
</table>

<p>The <span class="code">eventsProcessed</span> service provides notification that the current event cascade processing has finished and that
the containing node is now allowed to make updates to the scene graph. This is useful
for user code that wishes to be more efficient and only generate new events
after a collection of field changes are received. Within a given frame, user
code may have this service called more than once. User code cannot guarantee
that all changes to the containing node will be received by this time and
should take appropriate precautions. This service request shall only be called
after the containing node has received one or more events in this timestamp.
If the containing node has received no events in the current timestamp it
shall be an error for the browser to request this service.</p>

<h2><a name="ScriptContentDisposed"></a>
6.11.5 Disposed phase</h2>

<h3><a name="ScriptShutdown"></a>
6.11.5.1 shutdown</h3>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">SAI_B_Shutdown</td>
</tr>
<tr class="services">
<td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr><tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">Yes</td>
</tr>
</tbody>
</table>

<p>The <span class="code">shutdown</span> service provides notification that the user code has been disposed of by the containing node.
This may be due to the complete shutdown of the browser, the loaded world
changing or the containing node changing the user code to another implementation.
After this service request has been completed, user code will no longer be
functional or executed.</p>

<h1>
<img class="cube" src="../Images/cube.gif" alt="cube" width="20" height="19">
<a name="MatrixServices"></a>6.12 Matrix services</h1>

<h2><a name="MatrixServicesIntroduction"></a>6.12.1 Introduction</h2>

<p>Matrix objects represent the standard mathematic matrix capabilities using
double precision numbers and column-major order. All services here shall
be interpreted using standard mathematical definitions of matrices.</p>

<p>Implementations shall provide matrices that are 3x3 and 4x4. They  may define other orders of matrices. Implementations may also define additional
convenience services in addition to this minimum subset; for example, the
ability to individually access matrix elements.  Implementations may allow direct access to
the individual row and column values of the matrix.</p>

<p>In the following service definitions, the parameters describe single precision
inputs. An implementation shall also provided overloaded definitions that
include double precision input.</p>

<h2><a name="MatrixSet"></a>
6.12.2 set</h2>

<table class="services">
<tbody><tr class="services">
  <td class="services"><code>parameters:</code></td>
  <td class="services">SAIMatrix, SFVec3f, SFRotation, SFVec3f, SFRotation, SFVec3f</td>
</tr>
<tr class="services">
  <td class="services"><code>returns:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>errors:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>events:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>buffered:</code></td>
  <td class="services">No</td>
</tr>
<tr class="services">
  <td class="services"><code>external:</code></td>
  <td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">set</span> matrix service sets the matrix to the new value calculated from the parameters. The parameters
are defined to represent, in order: translation, rotation, and scale. If  a value for a parameter 
is not specified, the 
default value for that parameter shall be the default value for the equivalent 
field of the Transform node defined in <i>10.4.4 Transform</i> in
<a href="references.html#[I19775_1]">ISO/IEC 19775-1</a>.</p>

<h2><a name="MatrixGet"></a>
6.12.3 get</h2>

<table class="services">
<tbody>
<tr class="services">
  <td class="services"><code>parameters:</code></td>
  <td class="services">SAIMatrix, SFVec3f, SFRotation, SFVec3f</td>
</tr>
<tr class="services">
  <td class="services"><code>returns:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>errors:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>events:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>buffered:</code></td>
  <td class="services">No</td>
</tr>
<tr class="services">
  <td class="services"><code>external:</code></td>
  <td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">get</span> service computes and returns the transformation values from the matrix. The parameters
are defined to represent, in order: translation, rotation, scale, scaleOrientation
and center.</p>

<h2><a name="MatrixInverse"></a>
6.12.4 inverse</h2>

<table class="services">
<tbody>
<tr class="services">
  <td class="services"><code>parameters:</code></td>
  <td class="services">SAIMatrix</td>
</tr>
<tr class="services">
  <td class="services"><code>returns:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>errors:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>events:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>buffered:</code></td>
  <td class="services">No</td>
</tr>
<tr class="services">
  <td class="services"><code>external:</code></td>
  <td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">inverse</span> service calculates the inverse of this matrix in place.</p>

<h2><a name="MatrixTranspose"></a>
6.12.5 transpose</h2>

<table class="services">
<tbody>
<tr class="services">
<td class="services"><code>parameters:</code></td>
<td class="services">SAIMatrix</td>
</tr>
<tr class="services">
<td class="services"><code>returns:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>errors:</code></td>
<td class="services">None</td>
</tr>
<tr class="services">
<td class="services"><code>events:</code></td>
<td class="services">None</td></tr><tr class="services"><td class="services"><code>buffered:</code></td>
<td class="services">No</td>
</tr>
<tr class="services">
<td class="services"><code>external:</code></td>
<td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">transpose</span> service transposes this matrix in place.</p>

<h2><a name="MatrixMultiply"></a>
6.12.6 multiply</h2>

<table class="services">
<tbody>
<tr class="services">
  <td class="services"><code>parameters:</code></td>
  <td class="services">SAIMatrix, SAIMatrix</td>
</tr>
<tr class="services">
  <td class="services"><code>returns:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>errors:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>events:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>buffered:</code></td>
  <td class="services">No</td>
</tr>
<tr class="services">
  <td class="services"><code>external:</code></td>
  <td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">multiply</span> service multiplies the first matrix by the 
second matrix instance placing the result in the first matrix. Implementations shall
define multiplication operations in both directions: left and right.</p>

<h2><a name="MatrixMultiplyWithVector"></a>
6.12.7 multiplyWithVector</h2>

<table class="services">
<tbody>
<tr class="services">
  <td class="services"><code>parameters:</code></td>
  <td class="services">SAIMatrix, SFVec3f</td>
</tr>
<tr class="services">
  <td class="services"><code>returns:</code></td>
  <td class="services">SFVec3f</td>
</tr>
<tr class="services">
  <td class="services"><code>errors:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>events:</code></td>
  <td class="services">None</td>
</tr>
<tr class="services">
  <td class="services"><code>buffered:</code></td>
  <td class="services">No</td>
</tr>
<tr class="services">
  <td class="services"><code>external:</code></td>
  <td class="services">No</td>
</tr>
</tbody>
</table>

<p>The <span class="code">multiplyWithVector</span> service multiplies this matrix and a vector together. Implementations shall define
multiplication operations in both directions: left and right.</p>

<img class="x3dbar" src="../Images/x3dbar.png" alt="--- X3D separator bar ---" width="430" height="23">

</body>
</html>